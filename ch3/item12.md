item 12. toString을 항상 재정의하라
=============

toString() 란?
--------------------
모든 클래스는 Object 클래스를 기본적으로 상속받고, Object 클래스에 toString 메서드를 가짐   
toString()은 아래와 같이 객체를 표현하는 문자열을 반환   
```java
public String toString() {
        return getClass().getName() + "@" + Integer.toHexString(hashCode());
        }
```

`클래스 이름 + '@' + 해시코드 16진수`를 리턴   


toString을 재정의 해야하는 이유?
----------------
### toString 사용하는 예시
> 콘솔 확인   
> 디버깅   
> 로깅 등등 ..

객체가 `클래스 이름 + '@' + 해시코드 16진수`와 같은 방식으로 반환된다면 해당 객체에 어떤 것이 들었는지 알 수 없음   
toString을 잘 구현한 클래스는 **사용하기에 훨씬 즐겁고, 그 클래슬르 사용한 시스템은 디버깅** 하기 쉬움   


toString 재정의는 어떻게 해야할까?
--------------
실전에서 **toString은 그 객체가 가진 주요 정보 모두를 반환하는 게 좋다**   
`PhoneNumber@abcde~`보다 `707-867-5309`처럼 전화번호를 직접 알려주는 형태가 훨씬 유익   

하지만 **객체가 거대**하거나 객체의 상태가 **문자열로 표현하기에 적합하지 않다**면   
`맨해튼 거주자 전화번호부(총 14832423개)` 나 `Thread[main,5,main]`와 같은 요약 정보를 담아야 함   


toString의 반환값 포맷 문서화
------
#### 문서화를 권하는 예시
> 전화번호   
> 행렬 등등

### 문서화의 장점
- 객체는 표준적이고
- 명확하고
- 사람이 읽을 수 있게 됨
- 따라서 그 값 그대로 입출력에 사용할 수 있고
- CSV파일처럼 사람이 읽을 수 있는 데이터 객체로 저장할 수 있음


포맷을 명시하기로 했다면, 명시한 포맷에 맞는 문자열과 객체를 상호 전환할 수 있는 정적 팩터리나 생성자를 함께 제공해주자
(BigInteger, BigDecimal과 대부분의 기본 타입 클래스)

### 문서화의 단점
- 포맷을 한번 명시하게 되면 (그 클래스가 많이 쓰인다면) 평생 그 포맷에 얽매이게 된다
- 따라서 향후 릴리스에서 정보를 더 넣거나 포맷을 개선할 수 있는 **유연성**을 얻을 수 있다


### toString을 구현할 때 의도를 명확히 밝혀야한다
#### 포맷을 명시하려면 아주 정확하게 해야한다   

> /**   
이 전화번호의 문자열 표현을 반환한다.   
이 문자열은 "XXX-YYY-ZZZZ" 형태의 12글자로 구성된다.   
XXX는 지역 코드, YYY는 프리픽스, ZZZZ는 가입자 번호다.   
각각의 대문자는 10진수 숫자 하나를 나타낸다.   
> 
> 전화번호의 각 부분의 값이 너무 작아서 자릿수를 채울 수 없다면,   
앞에서부터 0으로 채워나간다. 예컨대 가입자 번호가 123이라면   
전화번호의 마짐가 네 문자는 "0123"이 된다.   
**/

```java
  @Override
  public String toString() {
  return String.format("%3d-%03d-%04d", areaCode, prefix, lineNum);
  }

```

> /**   
이 약물에 관한 대략적인 설명을 반환한다.  
다음은 이 설명의 일반적인 형태이나,  
상세 형식은 정해지지 않았으며 향후 변경될 수 있다.   
"[약물 #9: 유형=사랑, 냄새=테레빈유, 겉모습=먹물]"   
**/

```java
  @Override
  public String toString() { ... }
```
    

포맷 명시 여부와 상관없이 **toString이 반환한 값에 포함된 정보를 얻어올 수 있는 API를 제공**하자.   
- PhoneNumber 클래스는 지역 코드, 프리픽스, 가입자 번호용 접근자를 제공해야한다.
- 그렇지 않으면 이 정보가 필요한 프로그래머는 toString의 반호나값을 파싱할 수 밖에 없다.
- 이는 성능이 나빠지고, 필요하지도 않는 작업이다. 게다가 향후 포맷을 바꾸면 시스템이 망가지는 결과를 초래할 수 있다.
- 접근자를 제공하지 않으면 (변경될 수 있다고 문서화했더라도) 그 포맷이 사실상 준-표준 API나 다름없어진다.


toString은 항상 재정의 해야하나?
-------
- 정적 유틸리티 클래스는 toString을 제공할 이유가 없다.
- 대부분의 열거 타입도 자바가 이미 완벽한 toString을 제공하니 따로 재정의하지 않아도 된다.
- 하지만 하위 클래스들이 공유해야 할 문자열 표현이 있는 추상 클래스라면 toString을 재정의해줘야한다.

AutoValue 프레임워크의 toString
----
각 클래스이 가진 데이터에 따라 자동 생성 toString이 적합할 수도 있고 그렇지 않을 수도 있다.
- AutoValue는 각 필드의 내용을 알려주지만 클래스의 **의미**까지는 파악하기 힘들다.
- 하지만 객체의 값에 관해 알려주지 않는 Object의 toString보다는 자동 생성된 toString이 훨씬 유용하다.
